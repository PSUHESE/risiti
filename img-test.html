<html>
  <head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	</head>
	<body>
    <h1>Mashavu Risiti</h1>
	    <p>Upload a receipt image: <input type="file" name="file" id="file"/></p>
        <div id="upload-progress" />
		<script>
document.querySelector('#file').addEventListener('change', function(e) {
  var file = this.files[0];
  document.getElementById('file').style.display = 'none';
  	  $("#upload-progress").progressbar({ max: 100 });
  var fd = new FormData();
  fd.append("file", file);
  // These extra params aren't necessary but show that you can include other data.
 
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'splice.php', true);
  
  xhr.upload.onprogress = function(e) {
    if (e.lengthComputable) {
      var percentComplete = (e.loaded / e.total) * 100;
      console.log(percentComplete + '% uploaded');
	  $("#upload-progress").progressbar({ value: percentComplete });
    }
  };
 
  xhr.onload = function() {
    if (this.status == 200) {
      var resp = JSON.parse(this.response);
 
      console.log('Server got:', resp);
 
      var image = document.createElement('img');
      image.src = resp.dataUrl;
      document.body.appendChild(image);
    };
  };
 
  xhr.send(fd);
  document.getElementById('file').style.display = 'block';
}, false);
	</script>
  </body>
</html>